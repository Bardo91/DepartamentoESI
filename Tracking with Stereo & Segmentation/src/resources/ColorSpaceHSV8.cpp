/*
 * ColorSpaceHSV8.cpp
 *
 *  Created on: Oct 23, 2013
 *      Author: pablo
 */

#include <string>
#include <cstring>

#include <ColorClusterSpace.h>

using namespace std;
using namespace ccss;

int bin2dec(string bin) {
	const char *cstr = bin.c_str();
	int len, dec = 0, i, exp;

	len = strlen(cstr);
	exp = len - 1;

	for (i = 0; i < len; i++, exp--)
		dec += cstr[i] == '1' ? pow(2, exp) : 0;
	return dec;
}

c3i colorsHSV[8] = {
/*Black*/{ 0, 0, 0 },
/*White*/{ 0, 0, 255 },
/*Blue*/{ 120, 255, 255 },
/*Purple*/{ 150, 255, 255 },
/*Red*/{ 0, 255, 255 },
/*Orange*/{ 15, 255, 255 },
/*Yellow*/{ 30, 255, 255 },
/*Green*/{ 60, 255, 255 } };

string HClassStr[36] = { "00010011", "00010011", "00100011", "00100011",
		"00100011", "01000011", "01000011", "10000011", "10000011", "10000011",
		"10000011", "10000011", "10000011", "10000011", "10000011", "10000011",
		"00000111", "00000111", "00000111", "00000111", "00000111", "00000111",
		"00000111", "00000111", "00000111", "00000111", "00000111", "00000111",
		"00001011", "00001011", "00001011", "00001011", "00001011", "00001011",
		"00010011", "00010011" };
string SClassStr[36] = { "00000011", "00000011", "00000011", "00000011",
		"00000011", "00000011", "00000011", "00000011", "00000011", "11111101",
		"11111101", "11111101", "11111101", "11111101", "11111101", "11111101",
		"11111101", "11111101", "11111101", "11111101", "11111101", "11111101",
		"11111101", "11111101", "11111101", "11111101", "11111101", "11111101",
		"11111101", "11111101", "11111101", "11111101", "11111101", "11111101",
		"11111101", "11111101" };
string VClassStr[36] = { "00000001", "00000001", "00000001", "00000001",
		"00000001", "00000001", "00000001", "00000001", "11111110", "11111110",
		"11111110", "11111110", "11111110", "11111110", "11111110", "11111110",
		"11111110", "11111110", "11111110", "11111110", "11111110", "11111110",
		"11111110", "11111110", "11111110", "11111110", "11111110", "11111110",
		"11111110", "11111110", "11111110", "11111110", "11111110", "11111110",
		"11111110", "11111110" };

namespace ccss {

ColorClusterSpace *CreateHSVCS_8c(int MaskH, int MaskS, int MaskV) {

	uint8_t HClass[36];
	uint8_t SClass[36];
	uint8_t VClass[36];

	for (int i = 0; i < 36; i++) {
		HClass[i] = bin2dec(HClassStr[i]) & MaskH;
		SClass[i] = bin2dec(SClassStr[i]) & MaskS;
		VClass[i] = bin2dec(VClassStr[i]) & MaskV;
	}

	ColorClusterSpace *CS = new ColorClusterSpace(36, HClass, SClass, VClass,
			colorsHSV);

	return CS;
}

}
